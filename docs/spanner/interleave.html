<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Spanner ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–è§£èª¬</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #1a73e8;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .comparison {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .column {
            flex: 1;
        }
        .column h3 {
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .without h3 {
            background: #fee;
            color: #c00;
        }
        .with h3 {
            background: #efe;
            color: #0a0;
        }
        .table-box {
            border: 2px solid #333;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }
        .table-name {
            font-weight: bold;
            color: #1a73e8;
            margin-bottom: 10px;
            font-size: 16px;
        }
        .row {
            background: #f8f9fa;
            padding: 8px 12px;
            margin: 5px 0;
            border-radius: 4px;
            border-left: 3px solid #1a73e8;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
        .parent-row {
            background: #e8f0fe;
            border-left-color: #1a73e8;
            font-weight: bold;
        }
        .child-row {
            background: #fef7e0;
            border-left-color: #fbbc04;
            margin-left: 20px;
            position: relative;
        }
        .child-row::before {
            content: "â””â”€";
            position: absolute;
            left: -15px;
            color: #999;
        }
        .split-indicator {
            text-align: center;
            margin: 15px 0;
            color: #999;
            font-size: 20px;
        }
        .benefits {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin-top: 20px;
            border-radius: 4px;
        }
        .benefits h3 {
            color: #2e7d32;
            margin-top: 0;
        }
        .benefits ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .benefits li {
            margin: 8px 0;
        }
        .schema-box {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .keyword {
            color: #1976d2;
            font-weight: bold;
        }
        .table-def {
            color: #d32f2f;
            font-weight: bold;
        }
        .comment {
            color: #388e3c;
        }
        .performance {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }
        .perf-card {
            flex: 1;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        .perf-bad {
            background: #ffebee;
            border: 2px solid #ef5350;
        }
        .perf-good {
            background: #e8f5e9;
            border: 2px solid #66bb6a;
        }
        .perf-value {
            font-size: 32px;
            font-weight: bold;
            margin: 10px 0;
        }
        .perf-bad .perf-value {
            color: #d32f2f;
        }
        .perf-good .perf-value {
            color: #2e7d32;
        }
        .arrow {
            font-size: 24px;
            align-self: center;
            color: #4caf50;
        }
    </style>
</head>
<body>
    <h1>ğŸ”„ Cloud Spanner ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–</h1>
    <p class="subtitle">è¦ªå­é–¢ä¿‚ã®ã‚ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç‰©ç†çš„ã«è¿‘ãã«é…ç½®ã™ã‚‹æ©Ÿèƒ½</p>

    <div class="container">
        <h2>ğŸ“‹ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ã¨ã¯</h2>
        <p>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–(Interleave)ã¯ã€è¦ªãƒ†ãƒ¼ãƒ–ãƒ«ã¨å­ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç‰©ç†çš„ã«åŒã˜å ´æ‰€ã«ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€çµåˆã‚¯ã‚¨ãƒªã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’åŠ‡çš„ã«å‘ä¸Šã•ã›ã‚‹æ©Ÿèƒ½ã§ã™ã€‚</p>
        
        <div class="schema-box">
<span class="keyword">CREATE TABLE</span> <span class="table-def">Customers</span> (
    CustomerId <span class="keyword">INT64</span> <span class="keyword">NOT NULL</span>,
    Name <span class="keyword">STRING</span>(100),
    Email <span class="keyword">STRING</span>(100),
) <span class="keyword">PRIMARY KEY</span> (CustomerId);

<span class="keyword">CREATE TABLE</span> <span class="table-def">Orders</span> (
    CustomerId <span class="keyword">INT64</span> <span class="keyword">NOT NULL</span>,
    OrderId <span class="keyword">INT64</span> <span class="keyword">NOT NULL</span>,
    OrderDate <span class="keyword">DATE</span>,
    TotalAmount <span class="keyword">FLOAT64</span>,
) <span class="keyword">PRIMARY KEY</span> (CustomerId, OrderId),
  <span class="keyword">INTERLEAVE IN PARENT</span> Customers <span class="keyword">ON DELETE CASCADE</span>;
  <span class="comment">-- â†‘ ã“ã®è¡ŒãŒã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ã®è¨­å®š</span>
        </div>
    </div>

    <div class="container">
        <h2>ğŸ” ãƒ‡ãƒ¼ã‚¿é…ç½®ã®é•ã„</h2>
        <div class="comparison">
            <div class="column without">
                <h3>âŒ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ãªã—</h3>
                <p style="text-align: center; color: #666; font-size: 14px;">è¦ªã¨å­ãŒåˆ¥ã€…ã®å ´æ‰€ã«ä¿å­˜ã•ã‚Œã‚‹</p>
                
                <div class="table-box">
                    <div class="table-name">Customers ãƒ†ãƒ¼ãƒ–ãƒ«</div>
                    <div class="row parent-row">Customer 1</div>
                    <div class="row parent-row">Customer 2</div>
                    <div class="row parent-row">Customer 3</div>
                </div>

                <div class="split-indicator">â¬‡ï¸ ç‰©ç†çš„ã«é›¢ã‚ŒãŸå ´æ‰€ â¬‡ï¸</div>

                <div class="table-box">
                    <div class="table-name">Orders ãƒ†ãƒ¼ãƒ–ãƒ«</div>
                    <div class="row">Order 101 (Customer 1)</div>
                    <div class="row">Order 102 (Customer 1)</div>
                    <div class="row">Order 201 (Customer 2)</div>
                    <div class="row">Order 301 (Customer 3)</div>
                </div>
            </div>

            <div class="column with">
                <h3>âœ… ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ã‚ã‚Š</h3>
                <p style="text-align: center; color: #666; font-size: 14px;">è¦ªã¨å­ãŒç‰©ç†çš„ã«éš£æ¥ã—ã¦ä¿å­˜ã•ã‚Œã‚‹</p>
                
                <div class="table-box">
                    <div class="table-name">Customers + Orders (ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–)</div>
                    <div class="row parent-row">Customer 1</div>
                    <div class="row child-row">Order 101</div>
                    <div class="row child-row">Order 102</div>
                    
                    <div class="row parent-row" style="margin-top: 10px;">Customer 2</div>
                    <div class="row child-row">Order 201</div>
                    
                    <div class="row parent-row" style="margin-top: 10px;">Customer 3</div>
                    <div class="row child-row">Order 301</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿</h2>
        <p style="text-align: center; margin-bottom: 20px;">ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¯ã‚¨ãƒªã§å¤§ããªå·®ãŒå‡ºã¾ã™:</p>
        <div class="schema-box" style="background: #fff3e0; border-color: #ff9800;">
<span class="keyword">SELECT</span> c.Name, o.OrderId, o.TotalAmount
<span class="keyword">FROM</span> Customers c
<span class="keyword">JOIN</span> Orders o <span class="keyword">ON</span> c.CustomerId = o.CustomerId
<span class="keyword">WHERE</span> c.CustomerId = <span style="color: #e91e63;">123</span>;
        </div>

        <div class="performance">
            <div class="perf-card perf-bad">
                <h3>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ãªã—</h3>
                <div class="perf-value">ğŸŒ</div>
                <p>è¤‡æ•°ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸é ˜åŸŸã‹ã‚‰<br>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹å¿…è¦ãŒã‚ã‚‹</p>
                <p style="font-size: 12px; color: #666;">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ›ãƒƒãƒ—: å¤š</p>
            </div>
            <div class="arrow">â†’</div>
            <div class="perf-card perf-good">
                <h3>ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ã‚ã‚Š</h3>
                <div class="perf-value">ğŸš€</div>
                <p>1å›ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚¢ã‚¯ã‚»ã‚¹ã§<br>è¦ªå­ä¸¡æ–¹ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—</p>
                <p style="font-size: 12px; color: #666;">ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ›ãƒƒãƒ—: æœ€å°</p>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="benefits">
            <h3>âœ¨ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ã®ãƒ¡ãƒªãƒƒãƒˆ</h3>
            <ul>
                <li><strong>JOINæ€§èƒ½ã®å‘ä¸Š:</strong> è¦ªå­é–¢ä¿‚ã®JOINã‚¯ã‚¨ãƒªãŒæœ€å¤§10å€ä»¥ä¸Šé«˜é€ŸåŒ–</li>
                <li><strong>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è² è·ã®å‰Šæ¸›:</strong> ãƒ‡ãƒ¼ã‚¿ãŒç‰©ç†çš„ã«è¿‘ã„ãŸã‚ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãƒ›ãƒƒãƒ—ãŒæ¸›å°‘</li>
                <li><strong>ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åŠ¹ç‡:</strong> è¦ªå­ã‚’åŒæ™‚ã«æ›´æ–°ã™ã‚‹ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãŒåŠ¹ç‡çš„</li>
                <li><strong>ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰å‰Šé™¤:</strong> ON DELETE CASCADEã§è¦ªå‰Šé™¤æ™‚ã«å­ã‚‚è‡ªå‹•å‰Šé™¤</li>
                <li><strong>ãƒ‡ãƒ¼ã‚¿å±€æ‰€æ€§:</strong> é–¢é€£ãƒ‡ãƒ¼ã‚¿ãŒåŒã˜ã‚¹ãƒ—ãƒªãƒƒãƒˆ(åˆ†å‰²å˜ä½)ã«é…ç½®ã•ã‚Œã‚‹</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <h2>âš ï¸ æ³¨æ„ç‚¹</h2>
        <ul style="line-height: 1.8;">
            <li><strong>ä¸»ã‚­ãƒ¼ã®åˆ¶ç´„:</strong> å­ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸»ã‚­ãƒ¼ã¯è¦ªã®ä¸»ã‚­ãƒ¼ã‚’å«ã‚€å¿…è¦ãŒã‚ã‚‹</li>
            <li><strong>éšå±¤ã®åˆ¶é™:</strong> æœ€å¤§7ãƒ¬ãƒ™ãƒ«ã¾ã§ã®ãƒã‚¹ãƒˆãŒå¯èƒ½</li>
            <li><strong>ãƒ‡ãƒ¼ã‚¿åˆ†æ•£:</strong> è¦ªãƒ¬ã‚³ãƒ¼ãƒ‰ã‚ãŸã‚Šã®å­ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå¤šã™ãã‚‹ã¨ãƒ›ãƒƒãƒˆã‚¹ãƒãƒƒãƒˆã«ãªã‚‹å¯èƒ½æ€§</li>
            <li><strong>è¨­è¨ˆã®é‡è¦æ€§:</strong> å¾Œã‹ã‚‰ã‚¤ãƒ³ã‚¿ãƒ¼ãƒªãƒ¼ãƒ–ã‚’è¿½åŠ /å‰Šé™¤ã™ã‚‹ã®ã¯å›°é›£(ãƒ‡ãƒ¼ã‚¿å†ä½œæˆãŒå¿…è¦)</li>
        </ul>
    </div>

    <div class="container">
        <h2>ğŸ¯ ä½¿ã†ã¹ãã‚±ãƒ¼ã‚¹</h2>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
            <div style="background: #e8f5e9; padding: 15px; border-radius: 5px;">
                <h4 style="color: #2e7d32; margin-top: 0;">âœ… é©ã—ã¦ã„ã‚‹</h4>
                <ul style="font-size: 14px;">
                    <li>é¡§å®¢ã¨æ³¨æ–‡ã®é–¢ä¿‚</li>
                    <li>ãƒ–ãƒ­ã‚°è¨˜äº‹ã¨ã‚³ãƒ¡ãƒ³ãƒˆ</li>
                    <li>ã‚¢ãƒ«ãƒãƒ ã¨æ¥½æ›²</li>
                    <li>çµ„ç¹”ã¨å¾“æ¥­å“¡</li>
                </ul>
            </div>
            <div style="background: #ffebee; padding: 15px; border-radius: 5px;">
                <h4 style="color: #c62828; margin-top: 0;">âŒ é©ã•ãªã„</h4>
                <ul style="font-size: 14px;">
                    <li>å¤šå¯¾å¤šã®é–¢ä¿‚</li>
                    <li>é »ç¹ã«è¦ªã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
                    <li>å­ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒæ•°ä¸‡ä»¶ä»¥ä¸Š</li>
                    <li>ç‹¬ç«‹ã—ã¦ã‚¯ã‚¨ãƒªã™ã‚‹ã“ã¨ãŒå¤šã„</li>
                </ul>
            </div>
        </div>
    </div>

</body>
</html>
