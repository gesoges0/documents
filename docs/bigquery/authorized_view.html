<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigQuery æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼è§£èª¬</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #1a73e8;
            text-align: center;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .section-title {
            color: #1a73e8;
            border-bottom: 3px solid #1a73e8;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .scenario {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            border: 3px solid #ddd;
        }
        .scenario-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        .without-title {
            background: #ffebee;
            color: #c62828;
        }
        .with-title {
            background: #e8f5e9;
            color: #2e7d32;
        }
        .actor {
            background: white;
            border: 2px solid #4285f4;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        .actor-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        .actor-name {
            font-weight: bold;
            color: #1a73e8;
            margin-bottom: 5px;
        }
        .actor-desc {
            font-size: 13px;
            color: #666;
        }
        .resource {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
        }
        .resource-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }
        .resource-name {
            font-weight: bold;
            color: #e65100;
            margin-bottom: 5px;
        }
        .arrow-down {
            text-align: center;
            font-size: 24px;
            color: #666;
            margin: 10px 0;
        }
        .result-box {
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }
        .result-denied {
            background: #ffcdd2;
            color: #c62828;
            border: 2px solid #c62828;
        }
        .result-allowed {
            background: #c8e6c9;
            color: #2e7d32;
            border: 2px solid #2e7d32;
        }
        .architecture-diagram {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            margin: 20px 0;
            border: 2px solid #e0e0e0;
        }
        .layer {
            margin: 20px 0;
            position: relative;
        }
        .layer-title {
            font-weight: bold;
            color: #1a73e8;
            margin-bottom: 10px;
            font-size: 14px;
        }
        .layer-content {
            display: flex;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }
        .box {
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            min-width: 200px;
        }
        .user-box {
            background: #e3f2fd;
            border: 2px solid #1976d2;
        }
        .view-box {
            background: #e8f5e9;
            border: 2px solid #4caf50;
        }
        .table-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
        }
        .permission-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin: 5px 0;
        }
        .has-permission {
            background: #c8e6c9;
            color: #2e7d32;
        }
        .no-permission {
            background: #ffcdd2;
            color: #c62828;
        }
        .flow-arrow {
            font-size: 32px;
            color: #4caf50;
        }
        .code-box {
            background: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .keyword {
            color: #1976d2;
            font-weight: bold;
        }
        .string {
            color: #c62828;
        }
        .comment {
            color: #388e3c;
        }
        .step-by-step {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border-left: 4px solid #4caf50;
        }
        .step {
            display: flex;
            align-items: flex-start;
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 6px;
        }
        .step-number {
            background: #4caf50;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            margin-right: 15px;
            flex-shrink: 0;
        }
        .step-content {
            flex: 1;
        }
        .step-title {
            font-weight: bold;
            color: #2e7d32;
            margin-bottom: 5px;
        }
        .use-case {
            background: #e3f2fd;
            border-left: 4px solid #1976d2;
            padding: 15px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .use-case h4 {
            margin-top: 0;
            color: #1565c0;
        }
        .benefit-card {
            background: white;
            border: 2px solid #4caf50;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }
        .benefit-card h4 {
            color: #2e7d32;
            margin-top: 0;
        }
        .warning-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .warning-box strong {
            color: #e65100;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #e8f0fe;
            color: #1a73e8;
            font-weight: bold;
        }
        tr:hover {
            background: #f5f5f5;
        }
        .example-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .example-card {
            background: #f8f9fa;
            border: 2px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        .example-card h4 {
            color: #1a73e8;
            margin-top: 0;
        }
        .security-layer {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 15px 0;
            font-weight: bold;
        }
        .highlight {
            background: #fff9c4;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>ğŸ” BigQuery æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼</h1>
    <p class="subtitle">Authorized Views: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®å¼·åŠ›ãªä»•çµ„ã¿</p>

    <div class="container">
        <h2 class="section-title">ğŸ“– æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã¨ã¯</h2>
        <p>æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ï¼ˆAuthorized Viewsï¼‰ã¯ã€<strong>åŸºã¨ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ã‚‚ã€ãƒ“ãƒ¥ãƒ¼ã‚’é€šã˜ã¦ç‰¹å®šã®ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹</strong>ã‚ˆã†ã«ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚</p>
        
        <div style="background: #e8f0fe; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h3 style="color: #1a73e8; margin-top: 0;">ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ</h3>
            <p style="font-size: 16px; line-height: 1.8;">
                ãƒ“ãƒ¥ãƒ¼ã«<span class="highlight">ã€ŒåŸºã¨ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿å–ã‚‹æ¨©é™ã€</span>ã‚’ä¸ãˆã€
                ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã¯<span class="highlight">ã€Œãã®ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ã†æ¨©é™ã ã‘ã€</span>ã‚’ä»˜ä¸ã—ã¾ã™ã€‚
                ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã›ãšã«ã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å…¬é–‹ã§ãã¾ã™ã€‚
            </p>
        </div>

        <div class="comparison">
            <div class="scenario">
                <div class="scenario-title without-title">âŒ é€šå¸¸ã®ãƒ“ãƒ¥ãƒ¼ï¼ˆæ‰¿èªãªã—ï¼‰</div>
                
                <div class="actor">
                    <div class="actor-icon">ğŸ‘¤</div>
                    <div class="actor-name">ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆã‚¢ãƒŠãƒªã‚¹ãƒˆï¼‰</div>
                    <div class="actor-desc">ãƒ“ãƒ¥ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹</div>
                </div>

                <div class="arrow-down">â†“ ã‚¯ã‚¨ãƒªå®Ÿè¡Œ</div>

                <div class="resource">
                    <div class="resource-icon">ğŸ‘ï¸</div>
                    <div class="resource-name">é€šå¸¸ã®ãƒ“ãƒ¥ãƒ¼</div>
                    <div style="font-size: 12px; margin-top: 5px;">SELECT * FROM sensitive_table<br>WHERE department = 'Sales'</div>
                </div>

                <div class="arrow-down">â†“ åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§</div>

                <div class="resource">
                    <div class="resource-icon">ğŸ—„ï¸</div>
                    <div class="resource-name">sensitive_table</div>
                    <div class="permission-badge no-permission">âŒ ã‚¢ã‚¯ã‚»ã‚¹æ¨©ãªã—</div>
                </div>

                <div class="result-box result-denied">
                    â›” ã‚¢ã‚¯ã‚»ã‚¹æ‹’å¦<br>
                    <span style="font-size: 13px;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®æ¨©é™ãŒå¿…è¦</span>
                </div>
            </div>

            <div class="scenario">
                <div class="scenario-title with-title">âœ… æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼</div>
                
                <div class="actor">
                    <div class="actor-icon">ğŸ‘¤</div>
                    <div class="actor-name">ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼ˆã‚¢ãƒŠãƒªã‚¹ãƒˆï¼‰</div>
                    <div class="actor-desc">ãƒ“ãƒ¥ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹</div>
                </div>

                <div class="arrow-down">â†“ ã‚¯ã‚¨ãƒªå®Ÿè¡Œ</div>

                <div class="resource">
                    <div class="resource-icon">âœ…</div>
                    <div class="resource-name">æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼</div>
                    <div class="permission-badge has-permission">âœ“ ãƒ“ãƒ¥ãƒ¼ã¸ã®æ¨©é™ã‚ã‚Š</div>
                    <div style="font-size: 12px; margin-top: 5px;">SELECT * FROM sensitive_table<br>WHERE department = 'Sales'</div>
                </div>

                <div class="arrow-down">â†“ æ‰¿èªã•ã‚ŒãŸã‚¢ã‚¯ã‚»ã‚¹</div>

                <div class="resource">
                    <div class="resource-icon">ğŸ—„ï¸</div>
                    <div class="resource-name">sensitive_table</div>
                    <div class="permission-badge has-permission">âœ“ ãƒ“ãƒ¥ãƒ¼ãŒä»£ç†ã‚¢ã‚¯ã‚»ã‚¹</div>
                </div>

                <div class="result-box result-allowed">
                    âœ… ã‚¢ã‚¯ã‚»ã‚¹æˆåŠŸ<br>
                    <span style="font-size: 13px;">ãƒ“ãƒ¥ãƒ¼ãŒæ‰¿èªã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ‡ãƒ¼ã‚¿å–å¾—å¯èƒ½</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨å‹•ä½œã®ä»•çµ„ã¿</h2>
        
        <div class="architecture-diagram">
            <div class="layer">
                <div class="layer-title">ğŸ‘¥ ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤</div>
                <div class="layer-content">
                    <div class="box user-box">
                        <div style="font-size: 24px; margin-bottom: 8px;">ğŸ‘¤</div>
                        <strong>å–¶æ¥­ãƒãƒ¼ãƒ </strong>
                        <div class="permission-badge no-permission">æ©Ÿå¯†ãƒ†ãƒ¼ãƒ–ãƒ«: âœ—</div>
                        <div class="permission-badge has-permission">å–¶æ¥­ãƒ“ãƒ¥ãƒ¼: âœ“</div>
                    </div>
                    <div class="box user-box">
                        <div style="font-size: 24px; margin-bottom: 8px;">ğŸ‘¤</div>
                        <strong>ãƒãƒ¼ã‚±ãƒãƒ¼ãƒ </strong>
                        <div class="permission-badge no-permission">æ©Ÿå¯†ãƒ†ãƒ¼ãƒ–ãƒ«: âœ—</div>
                        <div class="permission-badge has-permission">ãƒãƒ¼ã‚±ãƒ“ãƒ¥ãƒ¼: âœ“</div>
                    </div>
                </div>
            </div>

            <div class="arrow-down" style="font-size: 28px; color: #4caf50;">â†“â†“</div>

            <div class="layer">
                <div class="layer-title">ğŸ‘ï¸ ãƒ“ãƒ¥ãƒ¼å±¤ï¼ˆæ‰¿èªæ¸ˆã¿ï¼‰</div>
                <div class="layer-content">
                    <div class="box view-box">
                        <strong>sales_view</strong>
                        <div style="font-size: 12px; margin-top: 8px;">
                            WHERE department='Sales'
                        </div>
                        <div class="permission-badge has-permission">æ‰¿èªæ¸ˆã¿</div>
                    </div>
                    <div class="box view-box">
                        <strong>marketing_view</strong>
                        <div style="font-size: 12px; margin-top: 8px;">
                            WHERE department='Marketing'
                        </div>
                        <div class="permission-badge has-permission">æ‰¿èªæ¸ˆã¿</div>
                    </div>
                </div>
            </div>

            <div class="security-layer">
                ğŸ” æ‰¿èªãƒ¡ã‚«ãƒ‹ã‚ºãƒ : ãƒ“ãƒ¥ãƒ¼ãŒåŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’æŒã¤
            </div>

            <div class="layer">
                <div class="layer-title">ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿å±¤</div>
                <div class="layer-content">
                    <div class="box table-box" style="min-width: 400px;">
                        <strong>employee_dataï¼ˆæ©Ÿå¯†ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰</strong>
                        <div style="font-size: 12px; margin-top: 8px;">
                            å…¨ç¤¾å“¡ã®çµ¦ä¸ã€å€‹äººæƒ…å ±ã€è©•ä¾¡ãƒ‡ãƒ¼ã‚¿
                        </div>
                        <div class="permission-badge no-permission">ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="warning-box">
            <strong>ğŸ”‘ é‡è¦ãƒã‚¤ãƒ³ãƒˆ:</strong>
            <ul style="margin: 10px 0; font-size: 14px;">
                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆemployee_dataï¼‰ã«ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„</li>
                <li>ãƒ“ãƒ¥ãƒ¼ï¼ˆsales_viewã€marketing_viewï¼‰ãŒæ‰¿èªã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ãƒ“ãƒ¥ãƒ¼çµŒç”±ã§ã®ã¿ãƒ‡ãƒ¼ã‚¿å–å¾—å¯èƒ½</li>
                <li>å„ãƒ“ãƒ¥ãƒ¼ã¯å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦æä¾›</li>
                <li>ç®¡ç†è€…ã¯ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¯¾ã™ã‚‹æ¨©é™ã‚’ç´°ã‹ãåˆ¶å¾¡ã§ãã‚‹</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">âš™ï¸ è¨­å®šæ‰‹é †</h2>
        
        <div class="step-by-step">
            <h3 style="color: #2e7d32; margin-top: 0;">ğŸ“‹ æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã®ä½œæˆã‚¹ãƒ†ãƒƒãƒ—</h3>
            
            <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <div class="step-title">åŸºã¨ãªã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æº–å‚™</div>
                    <div style="font-size: 14px; color: #666;">æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã¾ãŸã¯æ—¢å­˜ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç‰¹å®š</div>
                </div>
            </div>

            <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <div class="step-title">ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆ</div>
                    <div style="font-size: 14px; color: #666;">å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å…¬é–‹ã™ã‚‹SQLã‚¯ã‚¨ãƒªã§ãƒ“ãƒ¥ãƒ¼ã‚’å®šç¾©</div>
                </div>
            </div>

            <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <div class="step-title">ãƒ“ãƒ¥ãƒ¼ã‚’æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦è¨­å®š</div>
                    <div style="font-size: 14px; color: #666;">åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã§ãƒ“ãƒ¥ãƒ¼ã‚’æ‰¿èª</div>
                </div>
            </div>

            <div class="step">
                <div class="step-number">4</div>
                <div class="step-content">
                    <div class="step-title">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ“ãƒ¥ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸</div>
                    <div style="font-size: 14px; color: #666;">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã«ãƒ“ãƒ¥ãƒ¼ã®é–²è¦§æ¨©é™ã‚’ä»˜ä¸</div>
                </div>
            </div>
        </div>

        <h3 style="color: #1a73e8; margin-top: 30px;">ğŸ’» å®Ÿè£…ä¾‹</h3>

        <div class="code-box">
<span class="comment">-- Step 1: åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ï¼‰</span>
<span class="keyword">CREATE TABLE</span> <span class="string">`project.dataset.employee_data`</span> (
    employee_id <span class="keyword">INT64</span>,
    name <span class="keyword">STRING</span>,
    department <span class="keyword">STRING</span>,
    salary <span class="keyword">INT64</span>,
    performance_rating <span class="keyword">FLOAT64</span>,
    ssn <span class="keyword">STRING</span>
);

<span class="comment">-- Step 2: æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã®ä½œæˆï¼ˆå–¶æ¥­éƒ¨é–€ã®ã¿ï¼‰</span>
<span class="keyword">CREATE VIEW</span> <span class="string">`project.dataset.sales_employee_view`</span> <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    employee_id,
    name,
    department,
    performance_rating  <span class="comment">-- çµ¦ä¸ã‚„SSNã¯é™¤å¤–</span>
<span class="keyword">FROM</span> <span class="string">`project.dataset.employee_data`</span>
<span class="keyword">WHERE</span> department = <span class="string">'Sales'</span>;

<span class="comment">-- Step 3: ãƒ“ãƒ¥ãƒ¼ã‚’æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã¨ã—ã¦è¨­å®š (gcloudã‚³ãƒãƒ³ãƒ‰)</span>
<span class="comment">-- åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«å¯¾ã—ã¦ãƒ“ãƒ¥ãƒ¼ã‚’æ‰¿èª</span>
        </div>

        <div class="code-box" style="background: #263238; color: #aed581;">
<span style="color: #80cbc4;"># Step 3: gcloudã‚³ãƒãƒ³ãƒ‰ã§æ‰¿èª</span>
bq update --dataset \
  --add_authorized_view project:dataset.sales_employee_view \
  project:dataset

<span style="color: #80cbc4;"># ã¾ãŸã¯ã€Terraformã§ã®è¨­å®šä¾‹</span>
resource "google_bigquery_dataset_access" "authorized_view" {
  dataset_id = "dataset"
  project    = "project"
  
  view {
    project_id = "project"
    dataset_id = "dataset"
    table_id   = "sales_employee_view"
  }
}

<span style="color: #80cbc4;"># Step 4: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ“ãƒ¥ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸</span>
bq add-iam-policy-binding \
  --member='group:sales-team@company.com' \
  --role='roles/bigquery.dataViewer' \
  project:dataset.sales_employee_view
        </div>

        <div class="warning-box">
            <strong>âš ï¸ æ³¨æ„äº‹é …:</strong>
            <ul style="margin: 10px 0; font-size: 14px;">
                <li>ãƒ“ãƒ¥ãƒ¼ã¨åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯<strong>åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</strong>ã«ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ï¼ˆç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯å¯èƒ½ï¼‰</li>
                <li>æ‰¿èªã¯ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆãƒ¬ãƒ™ãƒ«ã§è¨­å®šã•ã‚Œã‚‹</li>
                <li>ãƒ“ãƒ¥ãƒ¼ã‚’æ‰¿èªã™ã‚‹ã¨ã€ãã®ãƒ“ãƒ¥ãƒ¼ã¯åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã®å…¨ãƒ‡ãƒ¼ã‚¿ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ãªã‚‹</li>
                <li>ãƒ“ãƒ¥ãƒ¼å†…ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯ã§ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">ğŸ¯ å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹</h2>
        
        <div class="use-case">
            <h4>ğŸ“Š éƒ¨é–€åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</h4>
            <p><strong>ã‚·ãƒŠãƒªã‚ª:</strong> å…¨ç¤¾å“¡ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ãƒ†ãƒ¼ãƒ–ãƒ«ãŒã‚ã‚‹ãŒã€å„éƒ¨é–€ã«ã¯è‡ªéƒ¨é–€ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹ã•ã›ãŸã„</p>
            <div class="code-box">
<span class="comment">-- å–¶æ¥­éƒ¨é–€ç”¨ãƒ“ãƒ¥ãƒ¼</span>
<span class="keyword">CREATE VIEW</span> sales_dept_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> all_employees 
<span class="keyword">WHERE</span> department = <span class="string">'Sales'</span>;

<span class="comment">-- ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°éƒ¨é–€ç”¨ãƒ“ãƒ¥ãƒ¼</span>
<span class="keyword">CREATE VIEW</span> marketing_dept_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> all_employees 
<span class="keyword">WHERE</span> department = <span class="string">'Marketing'</span>;
            </div>
            <p style="font-size: 14px; margin-top: 10px;"><strong>åŠ¹æœ:</strong> å„éƒ¨é–€ã¯è‡ªéƒ¨é–€ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§å¯èƒ½ã€‚ä»–éƒ¨é–€ã®ãƒ‡ãƒ¼ã‚¿ã‚„å…¨ç¤¾ãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã¯ä¸å¯ã€‚</p>
        </div>

        <div class="use-case">
            <h4>ğŸ”’ å€‹äººæƒ…å ±ã®éš è”½</h4>
            <p><strong>ã‚·ãƒŠãƒªã‚ª:</strong> é¡§å®¢ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æãƒãƒ¼ãƒ ã«æä¾›ã—ãŸã„ãŒã€å€‹äººã‚’ç‰¹å®šã§ãã‚‹æƒ…å ±ï¼ˆPIIï¼‰ã¯è¦‹ã›ãŸããªã„</p>
            <div class="code-box">
<span class="comment">-- åŒ¿ååŒ–ã•ã‚ŒãŸé¡§å®¢ãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ¥ãƒ¼</span>
<span class="keyword">CREATE VIEW</span> anonymized_customer_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    <span class="keyword">HASH</span>(customer_id) <span class="keyword">AS</span> customer_hash,  <span class="comment">-- IDã‚’ãƒãƒƒã‚·ãƒ¥åŒ–</span>
    age_range,                              <span class="comment">-- å¹´é½¢ã¯ç¯„å›²ã§æä¾›</span>
    prefecture,                             <span class="comment">-- éƒ½é“åºœçœŒãƒ¬ãƒ™ãƒ«ã¾ã§</span>
    purchase_amount,
    purchase_date
<span class="keyword">FROM</span> customer_master
<span class="comment">-- åå‰ã€ä½æ‰€ã€é›»è©±ç•ªå·ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯é™¤å¤–</span>
            </div>
            <p style="font-size: 14px; margin-top: 10px;"><strong>åŠ¹æœ:</strong> åˆ†æã«å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã¯æä¾›ã—ã¤ã¤ã€å€‹äººã‚’ç‰¹å®šã§ãã‚‹æƒ…å ±ã¯ä¿è­·ã€‚</p>
        </div>

        <div class="use-case">
            <h4>ğŸ’° çµ¦ä¸ãƒ‡ãƒ¼ã‚¿ã®æ®µéšçš„å…¬é–‹</h4>
            <p><strong>ã‚·ãƒŠãƒªã‚ª:</strong> çµŒå–¶å±¤ã«ã¯å…¨ç¤¾å“¡ã®çµ¦ä¸ãƒ‡ãƒ¼ã‚¿ã€ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã¯è‡ªãƒãƒ¼ãƒ ã®ã¿ã€ä¸€èˆ¬ç¤¾å“¡ã«ã¯è‡ªåˆ†ã®ã¿</p>
            <div class="code-box">
<span class="comment">-- ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ç”¨: è‡ªãƒãƒ¼ãƒ ã®çµ¦ä¸ãƒ‡ãƒ¼ã‚¿</span>
<span class="keyword">CREATE VIEW</span> manager_team_salary_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    e.employee_id,
    e.name,
    e.salary,
    e.team_id
<span class="keyword">FROM</span> employee_data e
<span class="keyword">WHERE</span> e.team_id <span class="keyword">IN</span> (
    <span class="keyword">SELECT</span> team_id 
    <span class="keyword">FROM</span> manager_mapping 
    <span class="keyword">WHERE</span> manager_email = SESSION_USER()
);

<span class="comment">-- çµŒå–¶å±¤ç”¨: å…¨ç¤¾å“¡ã®çµ¦ä¸ãƒ‡ãƒ¼ã‚¿ï¼ˆé›†è¨ˆè¾¼ã¿ï¼‰</span>
<span class="keyword">CREATE VIEW</span> executive_salary_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    department,
    <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> employee_count,
    <span class="keyword">AVG</span>(salary) <span class="keyword">AS</span> avg_salary,
    <span class="keyword">MIN</span>(salary) <span class="keyword">AS</span> min_salary,
    <span class="keyword">MAX</span>(salary) <span class="keyword">AS</span> max_salary
<span class="keyword">FROM</span> employee_data
<span class="keyword">GROUP BY</span> department;
            </div>
            <p style="font-size: 14px; margin-top: 10px;"><strong>åŠ¹æœ:</strong> å½¹è·ã«å¿œã˜ã¦é©åˆ‡ãªç²’åº¦ã§ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’åˆ¶å¾¡ã€‚</p>
        </div>

        <div class="use-case">
            <h4>ğŸŒ ã‚¯ãƒ­ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ãƒ¼ã‚¿å…±æœ‰</h4>
            <p><strong>ã‚·ãƒŠãƒªã‚ª:</strong> æœ¬ç•ªç’°å¢ƒã®ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æç’°å¢ƒã«å…±æœ‰ã—ãŸã„ãŒã€ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã¯è¨±å¯ã—ãŸããªã„</p>
            <div class="code-box">
<span class="comment">-- æœ¬ç•ªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§åˆ†æç”¨ãƒ“ãƒ¥ãƒ¼ã‚’ä½œæˆ</span>
<span class="comment">-- production-project.prod_dataset</span>
<span class="keyword">CREATE VIEW</span> analytics_safe_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    order_id,
    <span class="keyword">DATE</span>(order_timestamp) <span class="keyword">AS</span> order_date,  <span class="comment">-- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯æ—¥ä»˜ã«ä¸¸ã‚ã‚‹</span>
    product_id,
    quantity,
    <span class="keyword">ROUND</span>(price, <span class="number">-2</span>) <span class="keyword">AS</span> price_range        <span class="comment">-- ä¾¡æ ¼ã¯100å††å˜ä½ã«ä¸¸ã‚ã‚‹</span>
<span class="keyword">FROM</span> orders
<span class="keyword">WHERE</span> order_status = <span class="string">'completed'</span>;            <span class="comment">-- å®Œäº†ã—ãŸæ³¨æ–‡ã®ã¿</span>

<span class="comment">-- åˆ†æãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ“ãƒ¥ãƒ¼ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä»˜ä¸</span>
            </div>
            <p style="font-size: 14px; margin-top: 10px;"><strong>åŠ¹æœ:</strong> æœ¬ç•ªãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãã€å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å®‰å…¨ã«å…±æœ‰ã€‚</p>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">âœ¨ ãƒ¡ãƒªãƒƒãƒˆ</h2>
        
        <div class="benefit-card">
            <h4>ğŸ” ãã‚ç´°ã‹ã„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡</h4>
            <ul style="font-size: 14px; line-height: 1.8;">
                <li>ãƒ†ãƒ¼ãƒ–ãƒ«å…¨ä½“ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã›ãšã«ã€å¿…è¦ãªè¡Œãƒ»åˆ—ã®ã¿ã‚’å…¬é–‹</li>
                <li>è¤‡é›‘ãªæ¨©é™ç®¡ç†ã‚’ç°¡å˜ãªãƒ“ãƒ¥ãƒ¼å®šç¾©ã§å®Ÿç¾</li>
                <li>WHEREå¥ã‚„JOINã§å‹•çš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãŒå¯èƒ½</li>
            </ul>
        </div>

        <div class="benefit-card">
            <h4>ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®å‘ä¸Š</h4>
            <ul style="font-size: 14px; line-height: 1.8;">
                <li>æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã¸ã®ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²æ­¢</li>
                <li>å€‹äººæƒ…å ±ï¼ˆPIIï¼‰ã®éš è”½ãƒ»åŒ¿ååŒ–ãŒå®¹æ˜“</li>
                <li>ãƒ‡ãƒ¼ã‚¿æ¼æ´©ãƒªã‚¹ã‚¯ã®ä½æ¸›</li>
            </ul>
        </div>

        <div class="benefit-card">
            <h4>âš™ï¸ ç®¡ç†ã®ç°¡ç´ åŒ–</h4>
            <ul style="font-size: 14px; line-height: 1.8;">
                <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«å€‹åˆ¥ã®æ¨©é™è¨­å®šãŒä¸è¦</li>
                <li>ãƒ“ãƒ¥ãƒ¼ã®å®šç¾©ã‚’å¤‰æ›´ã™ã‚‹ã ã‘ã§ã‚¢ã‚¯ã‚»ã‚¹ç¯„å›²ã‚’èª¿æ•´å¯èƒ½</li>
                <li>ç›£æŸ»ãƒ­ã‚°ã§ã‚¢ã‚¯ã‚»ã‚¹å±¥æ­´ã‚’è¿½è·¡ã—ã‚„ã™ã„</li>
            </ul>
        </div>

        <div class="benefit-card">
            <h4>ğŸš€ æŸ”è»Ÿæ€§</h4>
            <ul style="font-size: 14px; line-height: 1.8;">
                <li>è¤‡æ•°ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’JOINã—ãŸãƒ“ãƒ¥ãƒ¼ã‚‚æ‰¿èªå¯èƒ½</li>
                <li>é›†è¨ˆã‚„å¤‰æ›ã‚’å«ã‚€è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã«ã‚‚å¯¾å¿œ</li>
                <li>SESSION_USER()ãªã©ã®é–¢æ•°ã§å‹•çš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚‚å¯èƒ½</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">âš ï¸ åˆ¶é™äº‹é …ã¨æ³¨æ„ç‚¹</h2>
        
        <table>
            <thead>
                <tr>
                    <th>é …ç›®</th>
                    <th>åˆ¶é™å†…å®¹</th>
                    <th>å¯¾å‡¦æ³•</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¶ç´„</strong></td>
                    <td>ãƒ“ãƒ¥ãƒ¼ã¨åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¯åŒã˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹</td>
                    <td>ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã¯å¯èƒ½ã€‚ã‚¯ãƒ­ã‚¹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å ´åˆã¯ãƒ‡ãƒ¼ã‚¿è»¢é€ã‚’æ¤œè¨</td>
                </tr>
                <tr>
                    <td><strong>ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</strong></td>
                    <td>ãƒ“ãƒ¥ãƒ¼ã¯å®Ÿè¡Œæ™‚ã«ã‚¯ã‚¨ãƒªãŒè©•ä¾¡ã•ã‚Œã‚‹ãŸã‚ã€è¤‡é›‘ãªãƒ“ãƒ¥ãƒ¼ã¯é…ã„</td>
                    <td>ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ã®ä½¿ç”¨ã‚’æ¤œè¨</td>
                </tr>
                <tr>
                    <td><strong>ãƒã‚¹ãƒˆã®åˆ¶é™</strong></td>
                    <td>æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã®ä¸Šã«åˆ¥ã®æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã‚’ä½œã‚‹ã“ã¨ã¯éæ¨å¥¨</td>
                    <td>ã‚·ãƒ³ãƒ—ãƒ«ãªéšå±¤æ§‹é€ ã‚’ç¶­æŒã™ã‚‹</td>
                </tr>
                <tr>
                    <td><strong>å¤–éƒ¨ãƒ†ãƒ¼ãƒ–ãƒ«</strong></td>
                    <td>å¤–éƒ¨ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆGCSã€Driveãªã©ï¼‰ã«ã¯æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã‚’ä½¿ç”¨ã§ããªã„</td>
                    <td>ãƒ‡ãƒ¼ã‚¿ã‚’BigQueryã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹</td>
                </tr>
                <tr>
                    <td><strong>ãƒ‡ãƒ¼ã‚¿ã®æ•´åˆæ€§</strong></td>
                    <td>åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ãƒ“ãƒ¥ãƒ¼ã®çµæœã‚‚å¤‰ã‚ã‚‹</td>
                    <td>ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚„ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚ºãƒ‰ãƒ“ãƒ¥ãƒ¼ã§å›ºå®š</td>
                </tr>
            </tbody>
        </table>

        <div class="warning-box" style="margin-top: 20px;">
            <strong>ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä¸Šã®æ³¨æ„:</strong>
            <ul style="margin: 10px 0; font-size: 14px;">
                <li><strong>ãƒ“ãƒ¥ãƒ¼ã®SQLã‚’æ¤œè¨¼:</strong> WHEREå¥ãŒé©åˆ‡ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ã¦ã„ã‚‹ã‹ç¢ºèª</li>
                <li><strong>å®šæœŸçš„ãªãƒ¬ãƒ“ãƒ¥ãƒ¼:</strong> æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã®ãƒªã‚¹ãƒˆã‚’å®šæœŸçš„ã«ç›£æŸ»</li>
                <li><strong>æœ€å°æ¨©é™ã®åŸå‰‡:</strong> å¿…è¦æœ€å°é™ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’å…¬é–‹</li>
                <li><strong>ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®æ¤œè¨¼:</strong> æœ¬ç•ªé©ç”¨å‰ã«æ¨©é™è¨­å®šã‚’ååˆ†ã«ãƒ†ã‚¹ãƒˆ</li>
            </ul>
        </div>
    </div>

    <div class="container">
        <h2 class="section-title">ğŸ†š ä»–ã®æ–¹æ³•ã¨ã®æ¯”è¼ƒ</h2>
        
        <table>
            <thead>
                <tr>
                    <th>æ–¹æ³•</th>
                    <th>ãƒ¡ãƒªãƒƒãƒˆ</th>
                    <th>ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ</th>
                    <th>é©ç”¨å ´é¢</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼</strong></td>
                    <td>
                        ãƒ»ãã‚ç´°ã‹ã„åˆ¶å¾¡<br>
                        ãƒ»SQLã§æŸ”è»Ÿã«å®šç¾©<br>
                        ãƒ»å‹•çš„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å¯èƒ½
                    </td>
                    <td>
                        ãƒ»åŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆ¶ç´„<br>
                        ãƒ»ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œæ™‚ã®ã‚³ã‚¹ãƒˆ
                    </td>
                    <td>
                        éƒ¨é–€åˆ¥ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡<br>
                        PIIéš è”½<br>
                        è¡Œãƒ»åˆ—ãƒ¬ãƒ™ãƒ«ã®åˆ¶å¾¡
                    </td>
                </tr>
                <tr>
                    <td><strong>è¡Œãƒ¬ãƒ™ãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£<br>(Row-Level Security)</strong></td>
                    <td>
                        ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«ã«ç›´æ¥è¨­å®š<br>
                        ãƒ»ãƒ“ãƒ¥ãƒ¼ä¸è¦<br>
                        ãƒ»ãƒãƒªã‚·ãƒ¼ãƒ™ãƒ¼ã‚¹ç®¡ç†
                    </td>
                    <td>
                        ãƒ»è¤‡é›‘ãªæ¡ä»¶ã®è¨­å®šãŒé›£ã—ã„<br>
                        ãƒ»BigQuery Enterpriseä»¥ä¸ŠãŒå¿…è¦
                    </td>
                    <td>
                        ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®å‹•çš„ãƒ•ã‚£ãƒ«ã‚¿<br>
                        ãƒãƒ«ãƒãƒ†ãƒŠãƒ³ãƒˆç’°å¢ƒ
                    </td>
                </tr>
                <tr>
                    <td><strong>åˆ—ãƒ¬ãƒ™ãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£<br>(Column-Level Security)</strong></td>
                    <td>
                        ãƒ»åˆ—å˜ä½ã§ã®åˆ¶å¾¡<br>
                        ãƒ»Policy Tagsã§ç®¡ç†<br>
                        ãƒ»Data Catalogé€£æº
                    </td>
                    <td>
                        ãƒ»è¡Œã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ä¸å¯<br>
                        ãƒ»è¨­å®šãŒè¤‡é›‘
                    </td>
                    <td>
                        æ©Ÿå¯†åˆ—ã®ä¿è­·<br>
                        PIIåˆ—ã®ãƒã‚¹ã‚­ãƒ³ã‚°
                    </td>
                </tr>
                <tr>
                    <td><strong>ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæ¨©é™</strong></td>
                    <td>
                        ãƒ»ã‚·ãƒ³ãƒ—ãƒ«<br>
                        ãƒ»ç®¡ç†ãŒç°¡å˜
                    </td>
                    <td>
                        ãƒ»ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆå…¨ä½“ãŒå¯¾è±¡<br>
                        ãƒ»ãã‚ç´°ã‹ã„åˆ¶å¾¡ä¸å¯
                    </td>
                    <td>
                        éƒ¨é–€åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆåˆ†é›¢<br>
                        ã‚·ãƒ³ãƒ—ãƒ«ãªæ¨©é™ç®¡ç†
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="container">
        <h2 class="section-title">ğŸ’¡ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>
        
        <div class="example-grid">
            <div class="example-card">
                <h4>âœ… æ¨å¥¨ã•ã‚Œã‚‹è¨­è¨ˆ</h4>
                <ul style="font-size: 14px; line-height: 1.8;">
                    <li>ãƒ“ãƒ¥ãƒ¼åã«ç›®çš„ã‚’æ˜è¨˜ï¼ˆsales_viewã€anonymized_viewãªã©ï¼‰</li>
                    <li>WHEREå¥ã§ç¢ºå®Ÿã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</li>
                    <li>å¿…è¦ãªåˆ—ã®ã¿ã‚’SELECT</li>
                    <li>å®šæœŸçš„ãªæ¨©é™ãƒ¬ãƒ“ãƒ¥ãƒ¼</li>
                    <li>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ï¼ˆä½•ã‚’éš è”½ã—ã¦ã„ã‚‹ã‹è¨˜éŒ²ï¼‰</li>
                </ul>
            </div>

            <div class="example-card">
                <h4>âŒ é¿ã‘ã‚‹ã¹ãè¨­è¨ˆ</h4>
                <ul style="font-size: 14px; line-height: 1.8;">
                    <li>SELECT * ã§ã®ãƒ“ãƒ¥ãƒ¼å®šç¾©</li>
                    <li>WHEREå¥ãªã—ã®å˜ç´”ãªãƒ“ãƒ¥ãƒ¼</li>
                    <li>éåº¦ã«ãƒã‚¹ãƒˆã—ãŸãƒ“ãƒ¥ãƒ¼</li>
                    <li>æ‰¿èªã‚’ä¹±ç™ºï¼ˆå¿…è¦æœ€å°é™ã«ï¼‰</li>
                    <li>ãƒ†ã‚¹ãƒˆãªã—ã®æœ¬ç•ªé©ç”¨</li>
                </ul>
            </div>
        </div>

        <div class="code-box" style="margin-top: 20px;">
<span class="comment">-- âœ… è‰¯ã„ä¾‹: æ˜ç¢ºãªç›®çš„ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°</span>
<span class="keyword">CREATE VIEW</span> sales_team_customer_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> 
    customer_id,
    company_name,
    industry,
    contract_value,
    <span class="keyword">DATE</span>(created_at) <span class="keyword">AS</span> signup_date
<span class="keyword">FROM</span> customers
<span class="keyword">WHERE</span> 
    assigned_team = <span class="string">'Sales'</span>
    <span class="keyword">AND</span> status = <span class="string">'active'</span>
    <span class="keyword">AND</span> contract_value > <span class="number">0</span>;

<span class="comment">-- âŒ æ‚ªã„ä¾‹: ãƒ•ã‚£ãƒ«ã‚¿ãªã—ã§å…¨ãƒ‡ãƒ¼ã‚¿å…¬é–‹</span>
<span class="keyword">CREATE VIEW</span> all_data_view <span class="keyword">AS</span>
<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> sensitive_table;
        </div>
    </div>

    <div class="container">
        <h2>ğŸ“š ã¾ã¨ã‚</h2>
        <div style="background: #e8f5e9; padding: 20px; border-radius: 8px; border-left: 4px solid #4caf50;">
            <h3 style="color: #2e7d32; margin-top: 0;">ğŸ“ æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã®æœ¬è³ª</h3>
            <ul style="line-height: 1.8;">
                <li><strong>ç›®çš„:</strong> åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ã®æ¨©é™ã‚’æŒãŸãªã„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€ãƒ“ãƒ¥ãƒ¼çµŒç”±ã§ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯</li>
                <li><strong>ä»•çµ„ã¿:</strong> ãƒ“ãƒ¥ãƒ¼ãŒã€Œä»£ç†ã€ã¨ã—ã¦åŸºã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ“ãƒ¥ãƒ¼ã®ã¿ã«ã‚¢ã‚¯ã‚»ã‚¹</li>
                <li><strong>åˆ©ç‚¹:</strong> ç´°ã‹ã„ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã€PIIä¿è­·ã€ç®¡ç†ã®ç°¡ç´ åŒ–</li>
                <li><strong>åˆ¶ç´„:</strong> åŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã®ã¿ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®ãŒå¿…è¦</li>
                <li><strong>ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹:</strong> éƒ¨é–€åˆ¥ãƒ‡ãƒ¼ã‚¿åˆ†é›¢ã€å€‹äººæƒ…å ±ä¿è­·ã€æ®µéšçš„ãƒ‡ãƒ¼ã‚¿å…¬é–‹</li>
            </ul>
            <p style="margin-top: 15px; font-size: 14px;">
                æ‰¿èªæ¸ˆã¿ãƒ“ãƒ¥ãƒ¼ã¯ã€BigQueryã«ãŠã‘ã‚‹<span class="highlight">å¼·åŠ›ãªãƒ‡ãƒ¼ã‚¿ã‚¬ãƒãƒŠãƒ³ã‚¹ãƒ„ãƒ¼ãƒ«</span>ã§ã™ã€‚
                é©åˆ‡ã«è¨­è¨ˆãƒ»é‹ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚’ä¿ã¡ãªãŒã‚‰å¿…è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’åŠ¹ç‡çš„ã«å…±æœ‰ã§ãã¾ã™ã€‚
            </p>
        </div>
    </div>

</body>
</html>
